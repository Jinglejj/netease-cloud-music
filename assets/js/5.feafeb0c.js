(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{171:function(t,s,a){"use strict";a.r(s);var r=a(0),e=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"centos下搭建fastdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos下搭建fastdfs","aria-hidden":"true"}},[t._v("#")]),t._v(" Centos下搭建Fastdfs")]),t._v(" "),a("h1",{attrs:{id:"环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 环境准备")]),t._v(" "),a("h2",{attrs:{id:"使用的系统软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用的系统软件","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6"}}),t._v("使用的系统软件")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("centos")]),t._v(" "),a("td",[t._v("7.x")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("libfatscommon")]),t._v(" "),a("td",[t._v("FastDFS 分离出的一些公用函数包")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FastDFS")]),t._v(" "),a("td",[t._v("FastDFS 本体")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("fastdfs-nginx-module")]),t._v(" "),a("td",[t._v("FastDFS 和 nginx 的关联模块")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("nginx")]),t._v(" "),a("td",[t._v("nginx1.15.4")])])])]),t._v(" "),a("h2",{attrs:{id:"编译环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译环境","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83"}}),t._v("编译环境")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install git gcc gcc-c++ make automake autoconf libtool pcre pcre-devel zlib zlib-devel openssl-devel wget vim -y\n")])])]),a("h2",{attrs:{id:"磁盘目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘目录","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%A3%81%E7%9B%98%E7%9B%AE%E5%BD%95"}}),t._v("磁盘目录")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("位置")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("所有安装包")]),t._v(" "),a("td",[t._v("/usr/local/src")])]),t._v(" "),a("tr",[a("td",[t._v("数据存储位置")]),t._v(" "),a("td",[t._v("/home/dfs/")])])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir /home/dfs #创建数据存储目录\ncd /usr/local/src #切换到安装目录准备下载安装包\n")])])]),a("h2",{attrs:{id:"安装-libfatscommon"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-libfatscommon","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85libfatscommon"}}),t._v("安装 libfatscommon")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git clone https://github.com/happyfish100/libfastcommon.git --depth 1\ncd libfastcommon/\n./make.sh && ./make.sh install #编译安装\n")])])]),a("h2",{attrs:{id:"安装-fastdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-fastdfs","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85fastdfs"}}),t._v("安装 FastDFS")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd ../ #返回上一级目录\ngit clone https://github.com/happyfish100/fastdfs.git --depth 1\ncd fastdfs/\n./make.sh && ./make.sh install #编译安装\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"配置文件准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置文件准备")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf\ncp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf\ncp /etc/fdfs/client.conf.sample /etc/fdfs/client.conf #客户端文件，测试用\ncp /usr/local/src/fastdfs/conf/http.conf /etc/fdfs/ #供nginx访问使用\ncp /usr/local/src/fastdfs/conf/mime.types /etc/fdfs/ #供nginx访问使用\n")])])]),a("h2",{attrs:{id:"安装-fastdfs-nginx-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-fastdfs-nginx-module","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85fastdfs-nginx-module"}}),t._v("安装 fastdfs-nginx-module")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd ../ #返回上一级目录\ngit clone https://github.com/happyfish100/fastdfs-nginx-module.git --depth 1\ncp /usr/local/src/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs\n")])])]),a("h2",{attrs:{id:"安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85nginx"}}),t._v("安装 nginx")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget http://nginx.org/download/nginx-1.15.4.tar.gz #下载nginx压缩包\ntar -zxvf nginx-1.15.4.tar.gz #解压\ncd nginx-1.15.4/\n#添加fastdfs-nginx-module模块\n./configure --add-module=/usr/local/src/fastdfs-nginx-module/src/ \nmake && make install #编译安装\n")])])]),a("h1",{attrs:{id:"单机部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单机部署","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2"}}),t._v("单机部署")]),t._v(" "),a("h2",{attrs:{id:"tracker-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tracker-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#tracker%E9%85%8D%E7%BD%AE"}}),t._v("tracker 配置")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[t._v("#服务器ip为 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.1")]),t._v("\n#建议用ftp下载下来这些文件 本地修改\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracker"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nport"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # tracker服务器端口（默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("一般不修改）\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 存储日志和数据的根目录\n")])])]),a("h2",{attrs:{id:"storage-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#storage%E9%85%8D%E7%BD%AE"}}),t._v("storage 配置")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nport"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23000")]),t._v("  # storage服务端口（默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("一般不修改）\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 数据和日志文件存储根目录\nstore_path0"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 第一个存储目录\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # tracker服务器IP和端口\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("server_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),t._v("  # http访问文件的端口"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("看情况修改"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("和nginx中保持一致"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"client-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-测试","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#client%E6%B5%8B%E8%AF%95"}}),t._v("client 测试")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("    #tracker服务器IP和端口\n#保存后测试"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("返回ID表示成功 如：group1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("M00"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("gz\nfdfs_upload_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("gz\n")])])]),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("要启动tracker服务和storage服务后才能测试")])]),t._v(" "),a("h2",{attrs:{id:"配置-nginx-访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-访问","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%85%8D%E7%BD%AEnginx%E8%AE%BF%E9%97%AE"}}),t._v("配置 nginx 访问")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mod_fastdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  #tracker服务器IP和端口\nurl_have_group_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\nstore_path0"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs\n")])])]),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置nginx.config")]),t._v("\nvim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加如下配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 该端口为storage.conf中的http.server_port相同")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ngx_fastdfs_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#测试下载，用外部浏览器访问刚才已传过的nginx安装包,引用返回的ID")]),t._v("\nhttp://192.168.52.1:8888/group1/M00/00/00/wKgAQ1pysxmAaqhAAA76tz-dVgg.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#弹出下载单机部署全部跑通")]),t._v("\n")])])]),a("h1",{attrs:{id:"分布式部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分布式部署","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2"}}),t._v("分布式部署")]),t._v(" "),a("h2",{attrs:{id:"tracker-配置-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tracker-配置-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#tracker%E9%85%8D%E7%BD%AE-1"}}),t._v("tracker 配置")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[t._v("#服务器ip为 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.4")]),t._v("\n#我建议用ftp下载下来这些文件 本地修改\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracker"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nport"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # tracker服务器端口（默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("一般不修改）\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 存储日志和数据的根目录\n")])])]),a("h2",{attrs:{id:"storage-配置-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-配置-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#storage%E9%85%8D%E7%BD%AE-1"}}),t._v("storage 配置")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nport"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23000")]),t._v("  # storage服务端口（默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("一般不修改）\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 数据和日志文件存储根目录\nstore_path0"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs  # 第一个存储目录\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("server_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),t._v("  # http访问文件的端口"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("默认"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("看情况修改"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("和nginx中保持一致"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"client-测试-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-测试-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#client%E6%B5%8B%E8%AF%95-1"}}),t._v("client 测试")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\nbase_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("moe"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n#保存后测试"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("返回ID表示成功 如：group1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("M00"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("gz\nfdfs_upload_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("gz\n")])])]),a("h2",{attrs:{id:"配置-nginx-访问-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-访问-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%85%8D%E7%BD%AEnginx%E8%AE%BF%E9%97%AE-1"}}),t._v("配置 nginx 访问")]),t._v(" "),a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mod_fastdfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("conf")]),t._v("\n#需要修改的内容如下\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\ntracker_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22122")]),t._v("  # 服务器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\nurl_have_group_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\nstore_path0"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dfs\n")])])]),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置nginx.config")]),t._v("\nvim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加如下配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 该端口为storage.conf中的http.server_port相同")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ngx_fastdfs_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%90%AF%E5%8A%A8"}}),t._v("启动")]),t._v(" "),a("h2",{attrs:{id:"防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防火墙","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%98%B2%E7%81%AB%E5%A2%99"}}),t._v("防火墙")]),t._v(" "),a("p",[t._v("#不关闭防火墙的话无法使用\nsystemctl stop firewalld.service #关闭\nsystemctl restart firewalld.service #重启")]),t._v(" "),a("h2",{attrs:{id:"tracker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tracker","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#tracker"}}),t._v("tracker")]),t._v(" "),a("p",[t._v("``shell\n/etc/init.d/fdfs_trackerd start #启动tracker服务\n/etc/init.d/fdfs_trackerd restart #重启动tracker服务\n/etc/init.d/fdfs_trackerd stop #停止tracker服务\nchkconfig fdfs_trackerd on #自启动tracker服务")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n## [](#storage)storage\n\n```shell\n/etc/init.d/fdfs_storaged start #启动storage服务\n/etc/init.d/fdfs_storaged restart #重动storage服务\n/etc/init.d/fdfs_storaged stop #停止动storage服务\nchkconfig fdfs_storaged on #自启动storage服务\n")])])]),a("h2",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#nginx"}}),t._v("nginx")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动nginx")]),t._v("\n/usr/local/nginx/sbin/nginx -s reload "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启nginx")]),t._v("\n/usr/local/nginx/sbin/nginx -s stop "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止nginx")]),t._v("\n")])])]),a("h2",{attrs:{id:"检测集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测集群","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E6%A3%80%E6%B5%8B%E9%9B%86%E7%BE%A4"}}),t._v("检测集群")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("/usr/bin/fdfs_monitor /etc/fdfs/storage.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 会显示会有几台服务器 有3台就会 显示 Storage 1-Storage 3的详细信息")]),t._v("\n")])])]),a("h1",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E8%AF%B4%E6%98%8E"}}),t._v("说明")]),t._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"}}),t._v("配置文件")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("tracker_server "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#有几台服务器写几个")]),t._v("\ngroup_name "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#地址的名称的命名")]),t._v("\nbind_addr "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#服务器ip绑定")]),t._v("\nstore_path_count "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#store_path(数字)有几个写几个")]),t._v("\nstore_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("数字"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置几个储存地址写几个 从0开")]),t._v("\n")])])]),a("h2",{attrs:{id:"可能遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可能遇到的问题","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"}}),t._v("可能遇到的问题")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ol",[a("li",[t._v("如果不是root 用户 你必须在除了cd的命令之外 全部加sudo")]),t._v(" "),a("li",[t._v("如果不是root 用户 编译和安装分开进行 先编译再安装")]),t._v(" "),a("li",[t._v("如果上传成功 但是nginx报错404 先检查mod_fastdfs.conf文件中的store_path0是否一致")]),t._v(" "),a("li",[t._v("如果nginx无法访问 先检查防火墙 和 mod_fastdfs.conf文件tracker_server是否一致")]),t._v(" "),a("li",[t._v("如果不是在/usr/local/src文件夹下安装 可能会编译出错")])])])])}],!1,null,null,null);e.options.__file="fastfds.md";s.default=e.exports}}]);